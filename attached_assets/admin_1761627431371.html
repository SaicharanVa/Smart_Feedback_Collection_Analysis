{% extends "base.html" %}

{% block title %}Admin Dashboard - FeedbackHub{% endblock %}

{% block content %}
<div class="container">
    <div class="admin-container">
        <h1>Admin Dashboard</h1>
        <p class="subtitle">Comprehensive feedback analytics and insights</p>

        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="totalFeedback">0</h3>
                <p>Total Feedback</p>
            </div>
            <div class="stat-card">
                <h3 id="avgRating">0</h3>
                <p>Average Rating</p>
            </div>
            <div class="stat-card positive">
                <h3 id="positiveFeedback">0</h3>
                <p>Positive</p>
            </div>
            <div class="stat-card negative">
                <h3 id="negativeFeedback">0</h3>
                <p>Negative</p>
            </div>
            <div class="stat-card neutral">
                <h3 id="neutralFeedback">0</h3>
                <p>Neutral</p>
            </div>
        </div>

        <div class="export-buttons">
            <a href="{{ url_for('export_csv') }}" class="btn btn-secondary">Export CSV</a>
            <a href="{{ url_for('export_pdf') }}" class="btn btn-secondary">Export PDF</a>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <h2>Sentiment Distribution</h2>
                <canvas id="sentimentChart"></canvas>
            </div>
            <div class="chart-container">
                <h2>Feedback Types</h2>
                <canvas id="typeChart"></canvas>
            </div>
        </div>

        <div class="feedback-table-container">
            <h2>All Feedback Entries</h2>
            
            <div class="filter-group">
                <label for="sentimentFilter">Filter by Sentiment:</label>
                <select id="sentimentFilter">
                    <option value="">All</option>
                    <option value="Positive">Positive</option>
                    <option value="Negative">Negative</option>
                    <option value="Neutral">Neutral</option>
                </select>
                
                <label for="typeFilter">Filter by Type:</label>
                <select id="typeFilter">
                    <option value="">All</option>
                    <option value="Bug Report">Bug Report</option>
                    <option value="Feature Request">Feature Request</option>
                    <option value="General Feedback">General Feedback</option>
                    <option value="Complaint">Complaint</option>
                    <option value="Praise">Praise</option>
                </select>
            </div>

            <div class="table-wrapper">
                <table id="feedbackTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Feedback</th>
                            <th>Rating</th>
                            <th>Sentiment</th>
                            <th>Image</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody id="feedbackTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div id="imageModal" class="modal">
    <span class="modal-close" onclick="closeImageModal()">&times;</span>
    <img class="modal-content" id="modalImage">
</div>

<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
{% endblock %}
